module compile

imports
  
  signatures/scheme-sig
  pp
  
imports
  fvm-common
  
imports
  codegen/-
  desugar/-

rules
  
  compile-run:
    (node, _, _, path, project-path) -> (filename, result)
    with
      filename := <guarantee-extension(|"stc")> path
    ; result   := <eval-framevm> <compile-to-fvm> <desugar> node
    
  compile:
    (node, _, _, path, project-path) -> (filename, result)
    with
      filename := <guarantee-extension(|"stc")> path
    ; result   := <pp-framevm> <compile-to-fvm> <desugar> node
